(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[610],{41559:(e,t,s)=>{"use strict";s.d(t,{G:()=>u});var a=s(95155);s(12115);var l=s(13052),n=s(50095),r=s(6874),c=s.n(r),d=s(65204),i=s(71919),o=s(66766);let m={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/admin/dashboard"},{title:"Division",url:"/admin/division"},{title:"Mandays",url:"/admin/mandays"}]},{title:"Accounts",items:[{title:"Manage Accounts",url:"/admin/Accounts/manageacc"},{title:"Create Accounts",url:"/admin/Accounts/createacc"}]},{title:"Incoming Documents",items:[{title:"Assign Track",url:"/admin/Documents/assigntrack"},{title:"Ongoing Documents",url:"/admin/Documents/ongoingdocs"},{title:"Sent Documents",url:"/admin/Documents/sentdocs"},{title:"Pending Documents",url:"/admin/outgoingdocuments/pendingdocs"}]},{title:"Outgoing Documents",items:[{title:"Closed Documents",url:"/admin/outgoingdocuments/closeddocs"},{title:"Returned Documents",url:"/admin/outgoingdocuments/returneddocs"}]}]};function u(e){let{...t}=e;return(0,a.jsxs)(i.Bx,{...t,children:[(0,a.jsxs)(i.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,a.jsx)(o.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,a.jsx)(i.Yv,{className:"gap-0",children:m.navMain.map(e=>(0,a.jsx)(d.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,a.jsxs)(i.Cn,{children:[(0,a.jsx)(i.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,a.jsxs)(d.R6,{children:[e.title," ",(0,a.jsx)(l.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,a.jsx)(d.Ke,{children:(0,a.jsx)(i.rQ,{children:(0,a.jsx)(i.wZ,{children:e.items.map(e=>(0,a.jsx)(i.FX,{children:(0,a.jsx)(i.Uj,{asChild:!0,children:(0,a.jsx)(c(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,a.jsx)(i.CG,{className:"p-4",children:(0,a.jsx)(n.r,{})}),(0,a.jsx)(i.jM,{})]})}},55091:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(95155),l=s(12115),n=s(34293),r=s(81115),c=s(41559),d=s(71919),i=s(76037),o=s(84995),m=s(88524),u=s(89852),x=s(97168),h=s(36639);function j(){let[e,t]=(0,l.useState)(""),[s,j]=(0,l.useState)([]),[f,g]=(0,l.useState)([]),[w,b]=(0,l.useState)(null),[p,N]=(0,l.useState)(""),[v,D]=(0,l.useState)(""),[A,C]=(0,l.useState)(1),[y]=(0,l.useState)(10);(0,l.useEffect)(()=>{let e=(0,r.KR)(n.OO,"documents"),t=(0,r.Zy)(e,e=>{try{if(e.exists()){let t=[];e.forEach(e=>{let s=e.val();"Returned"===s.status&&t.push({id:e.key,...s,forwardedtoname:s.forwardedtoname||""})});let s=[...t].sort((e,t)=>{let s=e=>{let t=e.match(/\d+$/);return t?parseInt(t[0],10):0},a=s(e.awdReferenceNumber),l=s(t.awdReferenceNumber);return a!==l?l-a:t.awdReferenceNumber.localeCompare(e.awdReferenceNumber)});j(s),g(s)}else j([]),g([])}catch(e){console.error("Error processing documents:",e)}});return()=>t()},[]),(0,l.useEffect)(()=>{""===e.trim()?g(s):g(s.filter(t=>{var s,a,l;return t.subject.toLowerCase().includes(e.toLowerCase())||t.awdReferenceNumber.toLowerCase().includes(e.toLowerCase())||(null===(s=t.forwardedBy)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(a=t.forwardedTo)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null===(l=t.remarks)||void 0===l?void 0:l.toLowerCase().includes(e.toLowerCase()))})),C(1)},[e,s]);let k=A*y,R=k-y,O=f.slice(R,k),S=Math.ceil(f.length/y),F=e=>C(e),I=async()=>{if(w&&p)try{let e,t;let s=localStorage.getItem("authToken");if(!s){alert("User not authenticated.");return}let a=(0,r.KR)(n.OO,"accounts/".concat(s));if(await new Promise(s=>{let l=(0,r.Zy)(a,a=>{if(l(),a.exists()){let s=a.val();e=s.name,t=s.division}else alert("User details not found in the database.");s(null)},{onlyOnce:!0})}),!e||!t)return;let l="".concat(e," (").concat(t,")"),c=new Date().toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),d=(0,r.KR)(n.OO,"documents/".concat(w.id));await (0,r.yo)(d,{...w,forwardedBy:l,forwardedTo:p,forwardedtoname:v||p,remarks:"Forwarded to ".concat(p),status:"Open",dateTimeSubmitted:c});let i=(0,r.KR)(n.OO,"tracking"),o={documentId:w.id,action:"Forwarded",forwardedBy:l,forwardedTo:p,forwardedtoname:v||p,remarks:"Forwarded to ".concat(p),status:"Open",dateTimeSubmitted:c,actionTimestamp:Date.now(),awdReferenceNumber:w.awdReferenceNumber,subject:w.subject,originatingOffice:w.originatingOffice};await (0,r.VC)(i,o),b(null),N(""),D(""),alert("Document successfully forwarded to ".concat(p,"!"))}catch(e){console.error("Error forwarding document:",e)}};return(0,a.jsx)(h.A,{allowedDivisions:["admin"],children:(0,a.jsx)(d.GB,{children:(0,a.jsxs)("div",{className:"flex h-screen w-screen",children:[(0,a.jsx)(c.G,{}),(0,a.jsxs)(d.sF,{className:"flex flex-1 flex-col w-full",children:[(0,a.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b px-4 bg-white",children:[(0,a.jsx)(d.x2,{className:"-ml-1"}),(0,a.jsx)(i.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,a.jsx)(o.Qp,{children:(0,a.jsxs)(o.AB,{children:[(0,a.jsx)(o.J5,{className:"hidden md:block",children:(0,a.jsx)(o.tJ,{children:"Documents"})}),(0,a.jsx)(o.tH,{className:"hidden md:block"}),(0,a.jsx)(o.J5,{children:(0,a.jsx)(o.tJ,{children:"Returned Documents"})})]})})]}),(0,a.jsxs)("div",{className:"p-6 w-full overflow-auto",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold",children:"Returned Documents"}),(0,a.jsx)(u.p,{type:"text",placeholder:"Search...",value:e,onChange:e=>t(e.target.value),className:"w-full md:w-64 border p-2 rounded"})]}),(0,a.jsx)("div",{className:"w-full overflow-x-auto mb-4",children:(0,a.jsxs)(m.XI,{className:"border w-full",children:[(0,a.jsx)(m.A0,{children:(0,a.jsxs)(m.Hj,{className:"bg-gray-100",children:[(0,a.jsx)(m.nd,{className:"min-w-[120px]",children:"Date"}),(0,a.jsx)(m.nd,{className:"min-w-[120px]",children:"AWD No."}),(0,a.jsx)(m.nd,{className:"min-w-[200px]",children:"Subject"}),(0,a.jsx)(m.nd,{className:"min-w-[150px]",children:"Forwarded By"}),(0,a.jsx)(m.nd,{className:"min-w-[150px]",children:"Forwarded To"}),(0,a.jsx)(m.nd,{className:"min-w-[150px]",children:"Remarks"})]})}),(0,a.jsx)(m.BF,{children:O.length>0?O.map(e=>(0,a.jsxs)(m.Hj,{onClick:()=>b(e),className:"cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)(m.nA,{className:"truncate max-w-[120px]",children:e.awdReceivedDate}),(0,a.jsx)(m.nA,{className:"truncate max-w-[120px]",children:e.awdReferenceNumber}),(0,a.jsx)(m.nA,{className:"truncate max-w-[200px]",children:e.subject}),(0,a.jsx)(m.nA,{className:"truncate max-w-[150px]",children:e.forwardedBy}),(0,a.jsx)(m.nA,{className:"truncate max-w-[150px]",children:e.forwardedtoname?"".concat(e.forwardedtoname," (").concat(e.forwardedTo,")"):e.forwardedTo}),(0,a.jsx)(m.nA,{className:"truncate max-w-[150px]",children:e.remarks})]},e.id)):(0,a.jsx)(m.Hj,{children:(0,a.jsx)(m.nA,{colSpan:6,className:"h-24 text-center",children:0===s.length?"No returned documents found":"No matching documents"})})})]})}),f.length>0&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",R+1," to ",Math.min(k,f.length)," of ",f.length," entries"]}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,a.jsx)(x.$,{onClick:()=>F(A-1),disabled:1===A,variant:"outline",size:"sm",children:"Previous"}),Array.from({length:Math.min(5,S)},(e,t)=>{let s;return s=S<=5?t+1:A<=3?t+1:A>=S-2?S-4+t:A-2+t,(0,a.jsx)(x.$,{onClick:()=>F(s),variant:A===s?"default":"outline",size:"sm",children:s},s)}),(0,a.jsx)(x.$,{onClick:()=>F(A+1),disabled:A===S,variant:"outline",size:"sm",children:"Next"})]})]}),w&&(0,a.jsxs)("div",{className:"mt-6 p-4 md:p-6 border rounded-lg shadow-lg bg-white w-full max-w-4xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:"Document Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Subject:"})," ",w.subject]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"AWD No.:"})," ",w.awdReferenceNumber]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Date of Document:"})," ",w.dateOfDocument]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Deadline:"})," ",w.deadline]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"FSIS Reference No.:"})," ",w.fsisReferenceNumber]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Originating Office:"})," ",w.originatingOffice]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Working Days:"})," ",w.workingDays]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg",children:[(0,a.jsx)("strong",{children:"Forwarded By:"})," ",w.forwardedBy]}),(0,a.jsxs)("p",{className:"text-sm md:text-lg col-span-1 md:col-span-2",children:[(0,a.jsx)("strong",{children:"Remarks:"})," ",w.remarks]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Route to Division:"}),(0,a.jsxs)("select",{value:p,onChange:e=>N(e.target.value),className:"w-full border p-2 rounded mb-4",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a division"}),(0,a.jsx)("option",{value:"CATCID Admin",children:"CATCID Admin"}),(0,a.jsx)("option",{value:"GACID Admin",children:"GACID Admin"}),(0,a.jsx)("option",{value:"EARD Admin",children:"EARD Admin"}),(0,a.jsx)("option",{value:"MOCSU Admin",children:"MOCSU Admin"})]})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Forwarded To Name:"}),(0,a.jsx)(u.p,{type:"text",placeholder:"Enter forwarded to name",value:v,onChange:e=>D(e.target.value),className:"w-full border p-2 rounded"})]}),(0,a.jsx)(x.$,{className:"w-full mt-4 md:mt-6 bg-blue-500 hover:bg-blue-600",onClick:I,disabled:!p,children:"Forward to Division"})]})]})]})]})})})}},88524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>r,BF:()=>c,Hj:()=>d,XI:()=>n,nA:()=>o,nd:()=>i});var a=s(95155);s(12115);var l=s(53999);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...s})})}function r(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}},93278:(e,t,s)=>{Promise.resolve().then(s.bind(s,55091))}},e=>{var t=t=>e(e.s=t);e.O(0,[507,888,655,2,528,441,684,358],()=>t(93278)),_N_E=e.O()}]);