(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{10430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(95155),n=s(12115),i=s(34293),r=s(81115),l=s(41559),c=s(71919),d=s(76037),o=s(84995),u=s(88524),m=s(35695),h=s(36639),x=s(97168),j=s(14885),g=s(5196),b=s(53999);function f(e){let{className:t,...s}=e;return(0,a.jsx)(j.bL,{"data-slot":"checkbox",className:(0,b.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(j.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(g.A,{className:"size-3.5"})})})}var p=s(89852);function v(){let[e,t]=(0,n.useState)([]),[s,j]=(0,n.useState)([]),[g,b]=(0,n.useState)(new Set),[v,N]=(0,n.useState)(1),[w]=(0,n.useState)(20),[y,k]=(0,n.useState)(""),[C,A]=(0,n.useState)(""),[S,D]=(0,n.useState)(!1),R=(0,m.useRouter)();(0,n.useEffect)(()=>{let e=(0,r.KR)(i.OO,"documents"),s=(0,r.P)(e,(0,r.kT)("status"),(0,r.iz)("Closed")),a=(0,r.Zy)(s,e=>{try{if(e.exists()){let s=[];e.forEach(e=>{let t=e.val();s.push({id:e.key,...t})}),s.sort((e,t)=>t.awdReferenceNumber.localeCompare(e.awdReferenceNumber)),t(s),j(s)}else t([]),j([])}catch(e){console.error("Error fetching documents:",e)}});return()=>a()},[]),(0,n.useEffect)(()=>{""===C.trim()?j(e):j(e.filter(e=>e.awdReferenceNumber.toLowerCase().includes(C.toLowerCase()))),N(1)},[C,e]);let E=e=>{localStorage.setItem("selectedAwdRefNum",e.awdReferenceNumber),R.push("/admin/Documents/subjectinformation")},O=(e,t)=>{t.stopPropagation();let s=new Set(g);s.has(e)?s.delete(e):s.add(e),b(s)},M=()=>{let e=H.map(e=>e.id),t=e.every(e=>g.has(e)),s=new Set(g);t?e.forEach(e=>s.delete(e)):e.forEach(e=>s.add(e)),b(s)},B=async()=>{if(0!==g.size&&y.trim())try{D(!0);let e={},t=new Date().toLocaleString();Array.from(g).forEach(s=>{e["documents/".concat(s,"/receivedBy")]="".concat(y.trim()," (").concat(t,")")}),await (0,r.yo)((0,r.KR)(i.OO),e),k(""),b(new Set)}catch(e){console.error("Error updating documents:",e)}finally{D(!1)}},z=v*w,_=z-w,H=s.slice(_,z),P=e=>N(e),$=H.length>0&&H.every(e=>g.has(e.id));return(0,a.jsx)(h.A,{allowedDivisions:["admin"],children:(0,a.jsx)(c.GB,{children:(0,a.jsxs)("div",{className:"flex h-screen",children:[(0,a.jsx)(l.G,{}),(0,a.jsxs)(c.sF,{className:"flex flex-1 flex-col",children:[(0,a.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b px-4 bg-white",children:[(0,a.jsx)(c.x2,{className:"-ml-1"}),(0,a.jsx)(d.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,a.jsx)(o.Qp,{children:(0,a.jsxs)(o.AB,{children:[(0,a.jsx)(o.J5,{className:"hidden md:block",children:(0,a.jsx)(o.tJ,{children:"Documents"})}),(0,a.jsx)(o.tH,{className:"hidden md:block"}),(0,a.jsx)(o.J5,{children:(0,a.jsx)(o.tJ,{children:"Closed Documents"})})]})})]}),(0,a.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold",children:"Closed Documents"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(p.p,{placeholder:"Search by AWD number",value:C,onChange:e=>A(e.target.value),className:"w-64"}),C&&(0,a.jsx)(x.$,{variant:"outline",onClick:()=>{if(""===C.trim())return;let e=s.map(e=>e.id),t=new Set(g);e.forEach(e=>{t.add(e)}),b(t)},children:"Select All Matching"})]})]}),g.size>0&&(0,a.jsxs)("div",{className:"flex gap-2 items-center mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)(p.p,{placeholder:"Enter receiver name",value:y,onChange:e=>k(e.target.value),className:"w-64"}),(0,a.jsx)(x.$,{onClick:B,disabled:!y.trim()||S,children:S?"Updating...":"Mark as Received"}),(0,a.jsx)(x.$,{variant:"outline",onClick:()=>{if(0===g.size)return;let t=e.filter(e=>g.has(e.id)).map(e=>[e.awdReferenceNumber,e.originatingOffice,e.subject,e.receivedBy||"Not received yet"].join("	")).join("\n");navigator.clipboard.writeText(t).then(()=>alert("".concat(g.size," documents copied to clipboard!"))).catch(e=>console.error("Failed to copy:",e))},disabled:S,children:"Copy Selected"}),(0,a.jsx)(x.$,{variant:"ghost",onClick:()=>b(new Set),disabled:S,children:"Clear Selection"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:[g.size," document(s) selected"]})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)(u.XI,{className:"border w-full",children:[(0,a.jsx)(u.A0,{children:(0,a.jsxs)(u.Hj,{className:"bg-gray-100",children:[(0,a.jsx)(u.nd,{children:(0,a.jsx)(f,{checked:$,onClick:e=>{e.stopPropagation(),M()}})}),(0,a.jsx)(u.nd,{children:"AWD No."}),(0,a.jsx)(u.nd,{children:"Originating Office"}),(0,a.jsx)(u.nd,{children:"Subject"}),(0,a.jsx)(u.nd,{children:"Received By"})]})}),(0,a.jsx)(u.BF,{children:H.length>0?H.map(e=>(0,a.jsxs)(u.Hj,{onClick:()=>E(e),className:"cursor-pointer hover:bg-gray-100",children:[(0,a.jsx)(u.nA,{onClick:t=>O(e.id,t),children:(0,a.jsx)(f,{checked:g.has(e.id),onClick:e=>e.stopPropagation()})}),(0,a.jsx)(u.nA,{children:e.awdReferenceNumber}),(0,a.jsx)(u.nA,{children:e.originatingOffice}),(0,a.jsx)(u.nA,{children:e.subject}),(0,a.jsx)(u.nA,{children:e.receivedBy||"Not received yet"})]},e.id)):(0,a.jsx)(u.Hj,{children:(0,a.jsx)(u.nA,{colSpan:5,className:"text-center py-4",children:C?"No matching documents found":"No closed documents available"})})})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",_+1,"-",Math.min(z,s.length)," of ",s.length," documents"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(x.$,{onClick:()=>P(v-1),disabled:1===v,variant:"outline",children:"Previous"}),Array.from({length:Math.ceil(s.length/w)},(e,t)=>(0,a.jsx)(x.$,{onClick:()=>P(t+1),variant:v===t+1?"default":"outline",children:t+1},t+1)),(0,a.jsx)(x.$,{onClick:()=>P(v+1),disabled:v===Math.ceil(s.length/w),variant:"outline",children:"Next"})]})]})]})]})]})})})}},26653:(e,t,s)=>{Promise.resolve().then(s.bind(s,10430))},41559:(e,t,s)=>{"use strict";s.d(t,{G:()=>m});var a=s(95155);s(12115);var n=s(13052),i=s(50095),r=s(6874),l=s.n(r),c=s(65204),d=s(71919),o=s(66766);let u={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/admin/dashboard"},{title:"Division",url:"/admin/division"},{title:"Mandays",url:"/admin/mandays"}]},{title:"Accounts",items:[{title:"Manage Accounts",url:"/admin/Accounts/manageacc"},{title:"Create Accounts",url:"/admin/Accounts/createacc"}]},{title:"Incoming Documents",items:[{title:"Assign Track",url:"/admin/Documents/assigntrack"},{title:"Ongoing Documents",url:"/admin/Documents/ongoingdocs"},{title:"Sent Documents",url:"/admin/Documents/sentdocs"},{title:"Pending Documents",url:"/admin/outgoingdocuments/pendingdocs"}]},{title:"Outgoing Documents",items:[{title:"Closed Documents",url:"/admin/outgoingdocuments/closeddocs"},{title:"Returned Documents",url:"/admin/outgoingdocuments/returneddocs"}]}]};function m(e){let{...t}=e;return(0,a.jsxs)(d.Bx,{...t,children:[(0,a.jsxs)(d.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,a.jsx)(o.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,a.jsx)(d.Yv,{className:"gap-0",children:u.navMain.map(e=>(0,a.jsx)(c.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,a.jsxs)(d.Cn,{children:[(0,a.jsx)(d.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,a.jsxs)(c.R6,{children:[e.title," ",(0,a.jsx)(n.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,a.jsx)(c.Ke,{children:(0,a.jsx)(d.rQ,{children:(0,a.jsx)(d.wZ,{children:e.items.map(e=>(0,a.jsx)(d.FX,{children:(0,a.jsx)(d.Uj,{asChild:!0,children:(0,a.jsx)(l(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,a.jsx)(d.CG,{className:"p-4",children:(0,a.jsx)(i.r,{})}),(0,a.jsx)(d.jM,{})]})}},88524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>r,BF:()=>l,Hj:()=>c,XI:()=>i,nA:()=>o,nd:()=>d});var a=s(95155);s(12115);var n=s(53999);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...s})})}function r(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,888,655,2,400,528,441,684,358],()=>t(26653)),_N_E=e.O()}]);