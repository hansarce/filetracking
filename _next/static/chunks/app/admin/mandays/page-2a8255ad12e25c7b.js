(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[114],{1621:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),l=a(12115),n=a(34293),r=a(81115),c=a(41559),i=a(71919),d=a(76037),o=a(84995),x=a(88524),m=a(88482),u=a(83540),h=a(3401),j=a(94754),f=a(96025),g=a(16238),p=a(94517),y=a(24026),b=a(83394),N=a(95784),v=a(36639);function w(){let[e,t]=(0,l.useState)([]),[a,w]=(0,l.useState)(!0),[D,k]=(0,l.useState)("month"),[A,W]=(0,l.useState)("all"),R=(0,l.useCallback)(async()=>{try{w(!0);let e=(0,r.KR)(n.OO,"mandays"),a=await (0,r.Jt)(e);if(a.exists()){let e=[];a.forEach(t=>{let a=t.val();e.push({id:t.key||"",awdReferenceNumber:a.awdReferenceNumber||"N/A",originalWorkingDays:parseInt(a.originalWorkingDays)||0,actualWorkingDays:parseInt(a.actualWorkingDays)||0,inspectorName:a.inspectorName||"Unknown",startDate:a.startDate||"N/A",endDate:a.endDate||"N/A",dateRecorded:a.dateRecorded||new Date().toISOString()})}),t(e)}else t([])}catch(e){console.error("Error fetching mandays:",e)}finally{w(!1)}},[]);(0,l.useEffect)(()=>{R()},[R]);let S=Array.from(new Set(e.map(e=>e.inspectorName))).sort(),C=(e,t)=>e<=0?0:Math.min(Math.round(e/t*100),100),M=(e,t)=>t<e?{text:"Ahead of Time",color:"text-green-500"}:t===e?{text:"On Schedule",color:"text-blue-500"}:{text:"Off Track",color:"text-red-500"},E=(()=>{let t="all"===A?e:e.filter(e=>e.inspectorName===A),a=new Map;return t.forEach(e=>{let t=new Date(e.dateRecorded),s="",l="";switch(D){case"day":l=new Date(s=t.toISOString().split("T")[0]).toLocaleDateString();break;case"week":let n=Math.ceil(t.getDate()/7);s="".concat(t.getFullYear(),"-W").concat(n),l="Week ".concat(n,", ").concat(t.getFullYear());break;case"month":s="".concat(t.getFullYear(),"-").concat(t.getMonth()+1),l=new Date(t.getFullYear(),t.getMonth(),1).toLocaleDateString(void 0,{month:"long",year:"numeric"});break;case"quarter":let r=Math.floor(t.getMonth()/3)+1;s="".concat(t.getFullYear(),"-Q").concat(r),l="Q".concat(r," ").concat(t.getFullYear());break;case"year":l=s="".concat(t.getFullYear())}a.has(s)||a.set(s,{period:l,originalDays:0,actualDays:0,efficiency:0,count:0});let c=a.get(s);c.originalDays+=e.originalWorkingDays,c.actualDays+=e.actualWorkingDays,c.count+=1,c.efficiency=C(c.originalDays,c.actualDays)}),Array.from(a.values()).sort((e,t)=>{let a=e.period,s=t.period;return a.localeCompare(s)})})(),Z="all"===A?e:e.filter(e=>e.inspectorName===A),_=Z.reduce((e,t)=>e+t.originalWorkingDays,0),F=Z.reduce((e,t)=>e+t.actualWorkingDays,0),B=C(_,F),I=M(_,F);return(0,s.jsx)(v.A,{allowedDivisions:["admin"],children:(0,s.jsx)(i.GB,{children:(0,s.jsxs)("div",{className:"flex w-screen",children:[(0,s.jsx)(c.G,{}),(0,s.jsxs)(i.sF,{className:"flex flex-1 flex-col",children:[(0,s.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b px-4 bg-white",children:[(0,s.jsx)(i.x2,{className:"-ml-1"}),(0,s.jsx)(d.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,s.jsx)(o.Qp,{children:(0,s.jsxs)(o.AB,{children:[(0,s.jsx)(o.J5,{className:"hidden md:block",children:(0,s.jsx)(o.tJ,{children:"Analytics"})}),(0,s.jsx)(o.tH,{className:"hidden md:block"}),(0,s.jsx)(o.J5,{children:(0,s.jsx)(o.tJ,{children:"Mandays Efficiency"})})]})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6 h-[calc(100vh-64px)] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Mandays Efficiency Analytics"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:[(0,s.jsxs)(N.l6,{value:D,onValueChange:e=>k(e),children:[(0,s.jsx)(N.bq,{className:"w-full md:w-[180px]",children:(0,s.jsx)(N.yv,{placeholder:"Time Period"})}),(0,s.jsxs)(N.gC,{children:[(0,s.jsx)(N.eb,{value:"day",children:"Daily"}),(0,s.jsx)(N.eb,{value:"week",children:"Weekly"}),(0,s.jsx)(N.eb,{value:"month",children:"Monthly"}),(0,s.jsx)(N.eb,{value:"quarter",children:"Quarterly"}),(0,s.jsx)(N.eb,{value:"year",children:"Yearly"})]})]}),(0,s.jsxs)(N.l6,{value:A,onValueChange:W,children:[(0,s.jsx)(N.bq,{className:"w-full md:w-[200px]",children:(0,s.jsx)(N.yv,{placeholder:"Filter by Inspector"})}),(0,s.jsxs)(N.gC,{children:[(0,s.jsx)(N.eb,{value:"all",children:"All Inspectors"}),S.map(e=>(0,s.jsx)(N.eb,{value:e,children:e},e))]})]})]})]}),a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("p",{children:"Loading mandays data..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(m.Zp,{className:"h-full",children:[(0,s.jsx)(m.aR,{className:"pb-2",children:(0,s.jsx)(m.ZB,{className:"text-sm font-medium",children:"Planned Days"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:_}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Total estimated working days"})]})]}),(0,s.jsxs)(m.Zp,{className:"h-full",children:[(0,s.jsx)(m.aR,{className:"pb-2",children:(0,s.jsx)(m.ZB,{className:"text-sm font-medium",children:"Actual Days"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsx)("div",{className:"text-3xl font-bold",children:F}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Total days actually worked"})]})]}),(0,s.jsxs)(m.Zp,{className:"h-full",children:[(0,s.jsx)(m.aR,{className:"pb-2",children:(0,s.jsx)(m.ZB,{className:"text-sm font-medium",children:"Status"})}),(0,s.jsxs)(m.Wu,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold",children:[B,"%"]}),(0,s.jsx)("p",{className:"text-xs ".concat(I.color," mt-1 font-medium"),children:I.text})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,s.jsxs)(m.Zp,{className:"h-[400px]",children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Mandays Comparison"})}),(0,s.jsx)(m.Wu,{className:"h-[calc(100%-56px)]",children:(0,s.jsx)(u.u,{width:"100%",height:"100%",children:(0,s.jsxs)(h.E,{data:E,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(j.d,{strokeDasharray:"3 3"}),(0,s.jsx)(f.W,{dataKey:"period"}),(0,s.jsx)(g.h,{}),(0,s.jsx)(p.m,{}),(0,s.jsx)(y.s,{}),(0,s.jsx)(b.y,{dataKey:"originalDays",name:"Planned Days",fill:"#8884d8"}),(0,s.jsx)(b.y,{dataKey:"actualDays",name:"Actual Days",fill:"#82ca9d"})]})})})]}),(0,s.jsxs)(m.Zp,{className:"h-[400px]",children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Efficiency Trend"})}),(0,s.jsx)(m.Wu,{className:"h-[calc(100%-56px)]",children:(0,s.jsx)(u.u,{width:"100%",height:"100%",children:(0,s.jsxs)(h.E,{data:E,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(j.d,{strokeDasharray:"3 3"}),(0,s.jsx)(f.W,{dataKey:"period"}),(0,s.jsx)(g.h,{domain:[0,100]}),(0,s.jsx)(p.m,{}),(0,s.jsx)(y.s,{}),(0,s.jsx)(b.y,{dataKey:"efficiency",name:"Efficiency %",fill:"#ffc658"})]})})})]})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Detailed Records"})}),(0,s.jsx)(m.Wu,{children:(0,s.jsx)("div",{className:"overflow-x-auto max-h-[500px]",children:(0,s.jsxs)(x.XI,{children:[(0,s.jsx)(x.A0,{className:"sticky top-0 bg-background",children:(0,s.jsxs)(x.Hj,{children:[(0,s.jsx)(x.nd,{className:"min-w-[120px]",children:"AWD No."}),(0,s.jsx)(x.nd,{className:"min-w-[180px]",children:"Inspector"}),(0,s.jsx)(x.nd,{className:"min-w-[100px]",children:"Planned"}),(0,s.jsx)(x.nd,{className:"min-w-[100px]",children:"Actual"}),(0,s.jsx)(x.nd,{className:"min-w-[120px]",children:"Start Date"}),(0,s.jsx)(x.nd,{className:"min-w-[120px]",children:"End Date"}),(0,s.jsx)(x.nd,{className:"min-w-[100px]",children:"Efficiency"}),(0,s.jsx)(x.nd,{className:"min-w-[150px]",children:"Status"})]})}),(0,s.jsx)(x.BF,{children:Z.map(e=>{let t=C(e.originalWorkingDays,e.actualWorkingDays),a=M(e.originalWorkingDays,e.actualWorkingDays);return(0,s.jsxs)(x.Hj,{children:[(0,s.jsx)(x.nA,{className:"font-medium",children:e.awdReferenceNumber}),(0,s.jsx)(x.nA,{children:e.inspectorName}),(0,s.jsx)(x.nA,{children:e.originalWorkingDays}),(0,s.jsx)(x.nA,{children:e.actualWorkingDays}),(0,s.jsx)(x.nA,{children:new Date(e.startDate).toLocaleDateString()}),(0,s.jsx)(x.nA,{children:new Date(e.endDate).toLocaleDateString()}),(0,s.jsxs)(x.nA,{children:[t,"%"]}),(0,s.jsx)(x.nA,{className:a.color,children:a.text})]},e.id)})})]})})})]})]})]})]})]})})})}},41559:(e,t,a)=>{"use strict";a.d(t,{G:()=>m});var s=a(95155);a(12115);var l=a(13052),n=a(50095),r=a(6874),c=a.n(r),i=a(65204),d=a(71919),o=a(66766);let x={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/admin/dashboard"},{title:"Division",url:"/admin/division"},{title:"Mandays",url:"/admin/mandays"}]},{title:"Accounts",items:[{title:"Manage Accounts",url:"/admin/Accounts/manageacc"},{title:"Create Accounts",url:"/admin/Accounts/createacc"}]},{title:"Incoming Documents",items:[{title:"Assign Track",url:"/admin/Documents/assigntrack"},{title:"Ongoing Documents",url:"/admin/Documents/ongoingdocs"},{title:"Sent Documents",url:"/admin/Documents/sentdocs"},{title:"Pending Documents",url:"/admin/outgoingdocuments/pendingdocs"}]},{title:"Outgoing Documents",items:[{title:"Closed Documents",url:"/admin/outgoingdocuments/closeddocs"},{title:"Returned Documents",url:"/admin/outgoingdocuments/returneddocs"}]}]};function m(e){let{...t}=e;return(0,s.jsxs)(d.Bx,{...t,children:[(0,s.jsxs)(d.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,s.jsx)(o.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,s.jsx)(d.Yv,{className:"gap-0",children:x.navMain.map(e=>(0,s.jsx)(i.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,s.jsxs)(d.Cn,{children:[(0,s.jsx)(d.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,s.jsxs)(i.R6,{children:[e.title," ",(0,s.jsx)(l.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,s.jsx)(i.Ke,{children:(0,s.jsx)(d.rQ,{children:(0,s.jsx)(d.wZ,{children:e.items.map(e=>(0,s.jsx)(d.FX,{children:(0,s.jsx)(d.Uj,{asChild:!0,children:(0,s.jsx)(c(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,s.jsx)(d.CG,{className:"p-4",children:(0,s.jsx)(n.r,{})}),(0,s.jsx)(d.jM,{})]})}},83551:(e,t,a)=>{Promise.resolve().then(a.bind(a,1621))},88482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>r});var s=a(95155);a(12115);var l=a(53999);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("flex flex-col gap-1.5 px-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",t),...a})}},88524:(e,t,a)=>{"use strict";a.d(t,{A0:()=>r,BF:()=>c,Hj:()=>i,XI:()=>n,nA:()=>o,nd:()=>d});var s=a(95155);a(12115);var l=a(53999);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",t),...a})})}function r(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},95784:(e,t,a)=>{"use strict";a.d(t,{TR:()=>h,bq:()=>m,eb:()=>j,gC:()=>u,l6:()=>d,s3:()=>o,yv:()=>x});var s=a(95155);a(12115);var l=a(93081),n=a(66474),r=a(5196),c=a(47863),i=a(53999);function d(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"select",...t})}function o(e){let{...t}=e;return(0,s.jsx)(l.YJ,{"data-slot":"select-group",...t})}function x(e){let{...t}=e;return(0,s.jsx)(l.WT,{"data-slot":"select-value",...t})}function m(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(l.l9,{"data-slot":"select-trigger",className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[a,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function u(e){let{className:t,children:a,position:n="popper",...r}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,s.jsx)(f,{}),(0,s.jsx)(l.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(g,{})]})})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(l.JU,{"data-slot":"select-label",className:(0,i.cn)("px-2 py-1.5 text-sm font-medium",t),...a})}function j(e){let{className:t,children:a,...n}=e;return(0,s.jsxs)(l.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(r.A,{className:"size-4"})})}),(0,s.jsx)(l.p4,{children:a})]})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(c.A,{className:"size-4"})})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(n.A,{className:"size-4"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[507,888,655,2,745,197,528,441,684,358],()=>t(83551)),_N_E=e.O()}]);