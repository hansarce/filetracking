(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{41559:(e,t,a)=>{"use strict";a.d(t,{G:()=>m});var s=a(95155);a(12115);var n=a(13052),r=a(50095),i=a(6874),l=a.n(i),d=a(65204),o=a(71919),c=a(66766);let u={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/admin/dashboard"},{title:"Division",url:"/admin/division"},{title:"Mandays",url:"/admin/mandays"}]},{title:"Accounts",items:[{title:"Manage Accounts",url:"/admin/Accounts/manageacc"},{title:"Create Accounts",url:"/admin/Accounts/createacc"}]},{title:"Incoming Documents",items:[{title:"Assign Track",url:"/admin/Documents/assigntrack"},{title:"Ongoing Documents",url:"/admin/Documents/ongoingdocs"},{title:"Sent Documents",url:"/admin/Documents/sentdocs"},{title:"Pending Documents",url:"/admin/outgoingdocuments/pendingdocs"}]},{title:"Outgoing Documents",items:[{title:"Closed Documents",url:"/admin/outgoingdocuments/closeddocs"},{title:"Returned Documents",url:"/admin/outgoingdocuments/returneddocs"}]}]};function m(e){let{...t}=e;return(0,s.jsxs)(o.Bx,{...t,children:[(0,s.jsxs)(o.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,s.jsx)(c.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,s.jsx)(o.Yv,{className:"gap-0",children:u.navMain.map(e=>(0,s.jsx)(d.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,s.jsxs)(o.Cn,{children:[(0,s.jsx)(o.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,s.jsxs)(d.R6,{children:[e.title," ",(0,s.jsx)(n.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,s.jsx)(d.Ke,{children:(0,s.jsx)(o.rQ,{children:(0,s.jsx)(o.wZ,{children:e.items.map(e=>(0,s.jsx)(o.FX,{children:(0,s.jsx)(o.Uj,{asChild:!0,children:(0,s.jsx)(l(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,s.jsx)(o.CG,{className:"p-4",children:(0,s.jsx)(r.r,{})}),(0,s.jsx)(o.jM,{})]})}},67133:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>d,_2:()=>o,rI:()=>i,ty:()=>l});var s=a(95155);a(12115);var n=a(9449),r=a(53999);function i(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"dropdown-menu",...t})}function l(e){let{...t}=e;return(0,s.jsx)(n.l9,{"data-slot":"dropdown-menu-trigger",...t})}function d(e){let{className:t,sideOffset:a=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...i})})}function o(e){let{className:t,inset:a,variant:i="default",...l}=e;return(0,s.jsx)(n.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":i,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l})}},68008:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),n=a(12115),r=a(35695),i=a(41559),l=a(71919),d=a(76037),o=a(84995),c=a(88524),u=a(89852),m=a(88145),x=a(97168),h=a(67133),f=a(44020),g=a(34293),v=a(81115),j=a(36639);let p=e=>{let t=(0,v.KR)(g.OO,"tracking");(0,v.Zy)(t,t=>{let a=t.val();if(a){let t=new Set,s=[];Object.entries(a).forEach(e=>{let[a,n]=e,r=n.awdReferenceNumber||"N/A";(n.forwardedBy||"N/A").includes("Admin")&&!t.has(r)&&(t.add(r),s.push({id:a,datetime:n.dateTimeSubmitted||"N/A",awdrefnu:r,subject:n.subject||"N/A",workingDays:n.workingDays||"N/A",startDate:n.startDate||n.dateTimeSubmitted||"N/A",endDate:n.endDate||void 0}))}),e(s.sort((e,t)=>{let a=e=>{let t=e.match(/\d+$/);return t?parseInt(t[0]):0};return a(t.awdrefnu)-a(e.awdrefnu)}))}else e([])})},b=(e,t,a)=>{if(a)return{status:"Closed",color:"gray"};if(!e||"N/A"===e)return{status:"N/A",color:"gray"};let s=parseInt(t)||0,n=new Date(e);n.setDate(n.getDate()+s);let r=Math.ceil((n.getTime()-Date.now())/864e5);return r<=0?{status:"Overdue",color:"red"}:r<=3?{status:"".concat(r," day(s) left"),color:"red"}:r<=7?{status:"".concat(r," day(s) left"),color:"yellow"}:r<=20?{status:"".concat(r," day(s) left"),color:"green"}:{status:"".concat(r," day(s) left"),color:"gray"}};function w(){let[e,t]=(0,n.useState)(""),[a,w]=(0,n.useState)([]),N=(0,r.useRouter)(),[y,D]=(0,n.useState)(1),[A]=(0,n.useState)(10);(0,n.useEffect)(()=>{p(w)},[]);let k=a.filter(t=>{var a,s;let n=e.toLowerCase();return(null===(a=t.subject)||void 0===a?void 0:a.toLowerCase().includes(n))||(null===(s=t.awdrefnu)||void 0===s?void 0:s.toLowerCase().includes(n))}),C=y*A,S=C-A,O=k.slice(S,C),_=Math.ceil(k.length/A),R=e=>D(e),I=e=>{e&&"N/A"!==e&&(localStorage.setItem("selectedAwdRefNum",e),N.push("/admin/Documents/subjectinformation"))},E=e=>{localStorage.setItem("selectedAwdRefNum",e),N.push("/admin/Documents/editaction")},z=async e=>{if(confirm("Delete document ".concat(e,"?")))try{let[t,a,s]=await Promise.all([(0,v.Jt)((0,v.KR)(g.OO,"documents")),(0,v.Jt)((0,v.KR)(g.OO,"tracking")),(0,v.Jt)((0,v.KR)(g.OO,"returned"))]),n={...M(t,"documents",e),...M(a,"tracking",e),...M(s,"returned",e)};Object.keys(n).length>0?(await (0,v.yo)((0,v.KR)(g.OO),n),alert("Document deleted successfully!")):alert("No matching documents found.")}catch(e){console.error("Delete failed:",e),alert("Failed to delete document.")}},M=(e,t,a)=>{let s={};return e.forEach(e=>{e.val().awdReferenceNumber===a&&(s["".concat(t,"/").concat(e.key)]=null)}),s};return(0,s.jsx)(j.A,{allowedDivisions:["admin"],children:(0,s.jsx)(l.GB,{children:(0,s.jsxs)("div",{className:"flex h-screen w-screen",children:[(0,s.jsx)(i.G,{}),(0,s.jsxs)(l.sF,{className:"flex flex-1 flex-col w-full",children:[(0,s.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4 bg-white",children:[(0,s.jsx)(l.x2,{className:"-ml-1"}),(0,s.jsx)(d.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,s.jsx)(o.Qp,{children:(0,s.jsxs)(o.AB,{children:[(0,s.jsx)(o.J5,{className:"hidden md:block",children:(0,s.jsx)(o.tJ,{children:"Documents"})}),(0,s.jsx)(o.tH,{className:"hidden md:block"}),(0,s.jsx)(o.J5,{children:(0,s.jsx)(o.tJ,{children:"Sent Documents"})})]})})]}),(0,s.jsxs)("div",{className:"p-6 w-full overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-6xl font-bold",children:"Sent Documents"}),(0,s.jsx)(u.p,{type:"text",placeholder:"Search documents...",value:e,onChange:e=>{t(e.target.value),D(1)},className:"w-full md:w-64 border p-2 rounded"})]}),(0,s.jsx)("div",{className:"rounded-md border w-full overflow-x-auto mb-4",children:(0,s.jsxs)(c.XI,{className:"min-w-full",children:[(0,s.jsx)(c.A0,{children:(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nd,{className:"min-w-[180px]",children:"Date and Time"}),(0,s.jsx)(c.nd,{className:"min-w-[150px]",children:"AWD No."}),(0,s.jsx)(c.nd,{className:"min-w-[250px]",children:"Subject"}),(0,s.jsx)(c.nd,{className:"min-w-[150px]",children:"Deadline Status"}),(0,s.jsx)(c.nd,{className:"min-w-[100px]",children:"Actions"})]})}),(0,s.jsx)(c.BF,{children:O.length?O.map(e=>{let t=b(e.startDate||e.datetime,e.workingDays,e.endDate);return(0,s.jsxs)(c.Hj,{className:"cursor-pointer hover:bg-gray-100",onClick:()=>I(e.awdrefnu),children:[(0,s.jsx)(c.nA,{className:"whitespace-nowrap",children:e.datetime}),(0,s.jsx)(c.nA,{className:"whitespace-nowrap font-medium",children:e.awdrefnu}),(0,s.jsx)(c.nA,{children:e.subject}),(0,s.jsx)(c.nA,{children:(0,s.jsx)(m.E,{variant:"default",className:"red"===t.color?"bg-red-600 text-white":"yellow"===t.color?"bg-yellow-400 text-white":"green"===t.color?"bg-green-600 text-white":"bg-gray-500 text-white",children:t.status})}),(0,s.jsx)(c.nA,{onClick:e=>e.stopPropagation(),className:"whitespace-nowrap",children:(0,s.jsxs)(h.rI,{children:[(0,s.jsx)(h.ty,{children:(0,s.jsx)(f.A,{className:"h-4 w-4"})}),(0,s.jsxs)(h.SQ,{children:[(0,s.jsx)(h._2,{onClick:()=>E(e.awdrefnu),children:"Edit"}),(0,s.jsx)(h._2,{onClick:()=>z(e.awdrefnu),children:"Delete"})]})]})})]},e.id)}):(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:5,className:"h-24 text-center",children:a.length?"No matching documents":"No sent documents"})})})]})}),k.length>0&&(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",S+1," to ",Math.min(C,k.length)," of ",k.length," entries"]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap justify-center",children:[(0,s.jsx)(x.$,{onClick:()=>R(y-1),disabled:1===y,variant:"outline",size:"sm",children:"Previous"}),Array.from({length:Math.min(5,_)},(e,t)=>{let a;return a=_<=5?t+1:y<=3?t+1:y>=_-2?_-4+t:y-2+t,(0,s.jsx)(x.$,{onClick:()=>R(a),variant:y===a?"default":"outline",size:"sm",children:a},a)}),(0,s.jsx)(x.$,{onClick:()=>R(y+1),disabled:y===_,variant:"outline",size:"sm",children:"Next"})]})]})]})]})]})})})}},88145:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(95155);a(12115);var n=a(99708),r=a(74466),i=a(53999);let l=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/70",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,asChild:r=!1,...d}=e,o=r?n.DX:"span";return(0,s.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),t),...d})}},88524:(e,t,a)=>{"use strict";a.d(t,{A0:()=>i,BF:()=>l,Hj:()=>d,XI:()=>r,nA:()=>c,nd:()=>o});var s=a(95155);a(12115);var n=a(53999);function r(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...a})})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},90605:(e,t,a)=>{Promise.resolve().then(a.bind(a,68008))}},e=>{var t=t=>e(e.s=t);e.O(0,[507,888,655,2,554,528,441,684,358],()=>t(90605)),_N_E=e.O()}]);