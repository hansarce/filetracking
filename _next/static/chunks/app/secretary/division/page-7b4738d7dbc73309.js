(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{17004:(e,s,a)=>{Promise.resolve().then(a.bind(a,85122))},40879:(e,s,a)=>{"use strict";a.d(s,{Y:()=>x});var r=a(95155);a(12115);var t=a(13052),l=a(50095),d=a(6874),n=a.n(d),i=a(66766),c=a(65204),o=a(71919);let m={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/secretary/dashboard"},{title:"Division",url:"/secretary/division"},{title:"Hold Documents",url:"/secretary/holddocuments"}]},{title:"Documents",items:[{title:"Ongoing Documents",url:"/secretary/ongoingdocs"},{title:"Pending Documents",url:"/secretary/pendingdocs"},{title:"Sent Documents",url:"/secretary/sentdocs"}]}]};function x(e){let{...s}=e;return(0,r.jsxs)(o.Bx,{...s,children:[(0,r.jsxs)(o.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,r.jsx)(i.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,r.jsx)(o.Yv,{className:"gap-0",children:m.navMain.map(e=>(0,r.jsx)(c.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,r.jsxs)(o.Cn,{children:[(0,r.jsx)(o.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,r.jsxs)(c.R6,{children:[e.title," ",(0,r.jsx)(t.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,r.jsx)(c.Ke,{children:(0,r.jsx)(o.rQ,{children:(0,r.jsx)(o.wZ,{children:e.items.map(e=>(0,r.jsx)(o.FX,{children:(0,r.jsx)(o.Uj,{asChild:!0,children:(0,r.jsx)(n(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,r.jsx)(o.CG,{className:"p-4",children:(0,r.jsx)(l.r,{})}),(0,r.jsx)(o.jM,{})]})}},85122:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var r=a(95155),t=a(12115),l=a(34293),d=a(81115),n=a(40879),i=a(71919),c=a(76037),o=a(84995),m=a(88524),x=a(89852),h=a(97168),u=a(36639);function f(){let[e,s]=(0,t.useState)(""),[a,f]=(0,t.useState)([]),[j,w]=(0,t.useState)(null),[b,p]=(0,t.useState)(""),[N,g]=(0,t.useState)(1),[v]=(0,t.useState)(10);(0,t.useEffect)(()=>{let e=(0,d.KR)(l.OO,"documents"),s=(0,d.Zy)(e,e=>{try{if(e.exists()){let s=[];e.forEach(e=>{let a=e.val();("CATCID Admin"===a.forwardedTo||"GACID Admin"===a.forwardedTo||"EARD Admin"===a.forwardedTo||"MOCSU Admin"===a.forwardedTo)&&"Open"===a.status&&s.push({id:e.key,awdReceivedDate:a.awdReceivedDate||"",awdReferenceNumber:a.awdReferenceNumber||"",subject:a.subject||"",dateOfDocument:a.dateOfDocument||"",deadline:a.deadline||"",fsisReferenceNumber:a.fsisReferenceNumber||"",originatingOffice:a.originatingOffice||"",forwardedBy:a.forwardedBy||"",forwardedTo:a.forwardedTo||"",remarks:a.remarks||"",status:a.status||"Open",workingDays:a.workingDays||"",dateTimeSubmitted:a.dateTimeSubmitted||new Date().toISOString()})}),f(s)}else f([])}catch(e){console.error("Error processing documents:",e)}});return()=>s()},[]);let y=a.filter(s=>{let a=e.toLowerCase();return s.awdReferenceNumber.toLowerCase().includes(a)||s.subject.toLowerCase().includes(a)||s.forwardedBy&&s.forwardedBy.toLowerCase().includes(a)||s.forwardedTo&&s.forwardedTo.toLowerCase().includes(a)||s.remarks&&s.remarks.toLowerCase().includes(a)}),D=N*v,k=D-v,R=y.slice(k,D),O=Math.ceil(y.length/v),S=e=>g(e),A=async()=>{if(j&&b.trim())try{let e=new Date().toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),s=(0,d.KR)(l.OO,"documents/".concat(j.id));await (0,d.yo)(s,{forwardedTo:"Secretary",remarks:b,endorsementDate:e});let a=(0,d.KR)(l.OO,"tracking");await (0,d.VC)(a,{id:j.id,awdReceivedDate:j.awdReceivedDate,awdReferenceNumber:j.awdReferenceNumber,subject:j.subject,dateOfDocument:j.dateOfDocument,deadline:j.deadline,fsisReferenceNumber:j.fsisReferenceNumber,originatingOffice:j.originatingOffice,forwardedBy:j.forwardedTo,forwardedTo:"Secretary",remarks:b,status:j.status,workingDays:j.workingDays,dateTimeSubmitted:j.dateTimeSubmitted,endorsementDate:e}),w(null),p(""),alert("Document successfully forwarded to Manager!")}catch(e){console.error("Error forwarding document:",e),alert("Failed to forward document. Please try again.")}};return(0,r.jsx)(u.A,{allowedDivisions:["secretary"],children:(0,r.jsx)(i.GB,{children:(0,r.jsxs)("div",{className:"flex h-screen w-screen",children:[(0,r.jsx)(n.Y,{}),(0,r.jsxs)(i.sF,{className:"flex flex-1 flex-col w-full",children:[(0,r.jsxs)("header",{className:"flex h-16 items-center gap-2 border-b px-4 bg-white",children:[(0,r.jsx)(i.x2,{className:"-ml-1"}),(0,r.jsx)(c.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,r.jsx)(o.Qp,{children:(0,r.jsxs)(o.AB,{children:[(0,r.jsx)(o.J5,{className:"hidden md:block",children:(0,r.jsx)(o.tJ,{children:"Documents"})}),(0,r.jsx)(o.tH,{className:"hidden md:block"}),(0,r.jsx)(o.J5,{children:(0,r.jsx)(o.tJ,{children:"Division Documents"})})]})})]}),(0,r.jsxs)("div",{className:"p-6 w-full overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold",children:"Division Documents"}),(0,r.jsx)(x.p,{type:"text",placeholder:"Search documents...",value:e,onChange:e=>s(e.target.value),className:"w-full md:w-64 border p-2 rounded"})]}),(0,r.jsx)("div",{className:"overflow-x-auto w-full",children:(0,r.jsxs)(m.XI,{className:"border w-full",children:[(0,r.jsx)(m.A0,{children:(0,r.jsxs)(m.Hj,{className:"bg-gray-100",children:[(0,r.jsx)(m.nd,{className:"min-w-[120px]",children:"Date"}),(0,r.jsx)(m.nd,{className:"min-w-[120px]",children:"AWD No."}),(0,r.jsx)(m.nd,{className:"min-w-[200px]",children:"Subject"}),(0,r.jsx)(m.nd,{className:"min-w-[150px]",children:"Forwarded By"}),(0,r.jsx)(m.nd,{className:"min-w-[150px]",children:"Forwarded To"}),(0,r.jsx)(m.nd,{className:"min-w-[150px]",children:"Remarks"})]})}),(0,r.jsx)(m.BF,{children:R.map(e=>(0,r.jsxs)(m.Hj,{onClick:()=>w(e),className:"cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)(m.nA,{className:"whitespace-nowrap",children:e.awdReceivedDate}),(0,r.jsx)(m.nA,{className:"whitespace-nowrap",children:e.awdReferenceNumber}),(0,r.jsx)(m.nA,{className:"min-w-[200px]",children:e.subject}),(0,r.jsx)(m.nA,{className:"whitespace-nowrap",children:e.forwardedBy}),(0,r.jsx)(m.nA,{className:"whitespace-nowrap",children:e.forwardedTo}),(0,r.jsx)(m.nA,{className:"whitespace-nowrap",children:e.remarks})]},e.id))})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",k+1," to ",Math.min(D,y.length)," of ",y.length," entries"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.$,{onClick:()=>S(N-1),disabled:1===N,variant:"outline",children:"Previous"}),Array.from({length:O},(e,s)=>s+1).map(e=>(0,r.jsx)(h.$,{onClick:()=>S(e),variant:N===e?"default":"outline",children:e},e)),(0,r.jsx)(h.$,{onClick:()=>S(N+1),disabled:N===O,variant:"outline",children:"Next"})]})]}),j&&(0,r.jsxs)("div",{className:"mt-6 p-6 border rounded-lg shadow-lg bg-white w-full max-w-4xl mx-auto",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Document Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"AWD No.:"}),(0,r.jsx)("p",{children:j.awdReferenceNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Date Received:"}),(0,r.jsx)("p",{children:j.awdReceivedDate})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Subject:"}),(0,r.jsx)("p",{children:j.subject})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Date of Document:"}),(0,r.jsx)("p",{children:j.dateOfDocument})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"FSIS Reference No.:"}),(0,r.jsx)("p",{children:j.fsisReferenceNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Originating Office:"}),(0,r.jsx)("p",{children:j.originatingOffice})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Forwarded By:"}),(0,r.jsx)("p",{children:j.forwardedBy})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Forwarded To:"}),(0,r.jsx)("p",{children:j.forwardedTo})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Deadline:"}),(0,r.jsx)("p",{children:j.deadline})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold",children:"Working Days:"}),(0,r.jsx)("p",{children:j.workingDays})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"block text-lg font-semibold mb-2",children:"Remarks:"}),(0,r.jsx)(x.p,{type:"text",placeholder:"Enter remarks...",value:b,onChange:e=>p(e.target.value),className:"w-full border p-2 rounded"})]}),(0,r.jsx)(h.$,{className:"w-full mt-6",onClick:A,disabled:!b.trim(),children:"Forward to Manager"})]})]})]})]})})})}},88524:(e,s,a)=>{"use strict";a.d(s,{A0:()=>d,BF:()=>n,Hj:()=>i,XI:()=>l,nA:()=>o,nd:()=>c});var r=a(95155);a(12115);var t=a(53999);function l(e){let{className:s,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,t.cn)("w-full caption-bottom text-sm",s),...a})})}function d(e){let{className:s,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,t.cn)("[&_tr]:border-b",s),...a})}function n(e){let{className:s,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,t.cn)("[&_tr:last-child]:border-0",s),...a})}function i(e){let{className:s,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,t.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...a})}function c(e){let{className:s,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,t.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}function o(e){let{className:s,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,t.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[507,888,655,2,528,441,684,358],()=>s(17004)),_N_E=e.O()}]);