(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{16118:(e,s,t)=>{Promise.resolve().then(t.bind(t,43844))},40879:(e,s,t)=>{"use strict";t.d(s,{Y:()=>h});var r=t(95155);t(12115);var l=t(13052),a=t(50095),n=t(6874),i=t.n(n),d=t(66766),c=t(65204),o=t(71919);let u={navMain:[{title:"Home",items:[{title:"Dashboard",url:"/secretary/dashboard"},{title:"Division",url:"/secretary/division"},{title:"Hold Documents",url:"/secretary/holddocuments"}]},{title:"Documents",items:[{title:"Ongoing Documents",url:"/secretary/ongoingdocs"},{title:"Pending Documents",url:"/secretary/pendingdocs"},{title:"Sent Documents",url:"/secretary/sentdocs"}]}]};function h(e){let{...s}=e;return(0,r.jsxs)(o.Bx,{...s,children:[(0,r.jsxs)(o.Gh,{className:"flex items-center pt-2 font-bold justify-center text-2xl gap-2",children:[(0,r.jsx)(d.default,{src:"/images/awdlogo.png",alt:"Airworthiness Logo",width:80,height:80,className:"w-20 h-20"}),"AIRWORTHINESS"]}),(0,r.jsx)(o.Yv,{className:"gap-0",children:u.navMain.map(e=>(0,r.jsx)(c.Nt,{title:e.title,defaultOpen:!0,className:"group/collapsible",children:(0,r.jsxs)(o.Cn,{children:[(0,r.jsx)(o.jj,{asChild:!0,className:"group/label text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:(0,r.jsxs)(c.R6,{children:[e.title," ",(0,r.jsx)(l.A,{className:"ml-auto transition-transform group-data-[state=open]/collapsible:rotate-90"})]})}),(0,r.jsx)(c.Ke,{children:(0,r.jsx)(o.rQ,{children:(0,r.jsx)(o.wZ,{children:e.items.map(e=>(0,r.jsx)(o.FX,{children:(0,r.jsx)(o.Uj,{asChild:!0,children:(0,r.jsx)(i(),{href:e.url,children:e.title})})},e.title))})})})]})},e.title))}),(0,r.jsx)(o.CG,{className:"p-4",children:(0,r.jsx)(a.r,{})}),(0,r.jsx)(o.jM,{})]})}},43844:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(95155),l=t(12115),a=t(35695),n=t(40879),i=t(71919),d=t(76037),c=t(84995),o=t(88524),u=t(89852),h=t(97168),x=t(34293),m=t(81115),j=t(36639);let f=e=>{let s=(0,m.KR)(x.OO,"tracking");(0,m.Zy)(s,s=>{let t=s.val();if(console.log("Fetched Firebase Data:",t),t){let s=new Set,r=[];Object.entries(t).forEach(e=>{let[t,l]=e,a=l.awdReferenceNumber||"N/A",n=l.forwardedBy||"N/A";n.includes("Secretary")&&!s.has(a)&&(s.add(a),r.push({id:t,datetime:l.dateTimeSubmitted||"N/A",awdrefnu:a,subject:l.subject||"N/A",origioffice:l.originatingOffice||"N/A",fsisrefnum:l.fsisReferenceNumber||"N/A",forwardby:n,forwardto:l.forwardedTo||"N/A",remarks:l.remarks||"N/A"}))}),r.sort((e,s)=>{let t=e=>{let s=e.match(/\d+$/);return s?parseInt(s[0],10):0},r=t(e.awdrefnu),l=t(s.awdrefnu);return r!==l?l-r:s.awdrefnu.localeCompare(e.awdrefnu)}),e(r)}else e([])})};function b(){let[e,s]=(0,l.useState)(""),[t,x]=(0,l.useState)([]),[m,b]=(0,l.useState)([]),[w,N]=(0,l.useState)(1),g=(0,a.useRouter)();(0,l.useEffect)(()=>{f(x)},[]),(0,l.useEffect)(()=>{""===e.trim()?b(t):b(t.filter(s=>{var t,r,l,a,n;let i=e.toLowerCase();return(null===(t=s.subject)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(r=s.awdrefnu)||void 0===r?void 0:r.toLowerCase().includes(i))||(null===(l=s.forwardby)||void 0===l?void 0:l.toLowerCase().includes(i))||(null===(a=s.forwardto)||void 0===a?void 0:a.toLowerCase().includes(i))||(null===(n=s.remarks)||void 0===n?void 0:n.toLowerCase().includes(i))})),N(1)},[e,t]);let p=Math.ceil(m.length/10),v=m.slice((w-1)*10,10*w),A=e=>{N(e)},y=e=>{if(!e||"N/A"===e){console.error("awdReferenceNumber is undefined or missing!");return}localStorage.setItem("selectedAwdRefNum",e),g.push("/secretary/subjectinformation")};return(0,r.jsx)(j.A,{allowedDivisions:["secretary"],children:(0,r.jsx)(i.GB,{children:(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsx)(n.Y,{}),(0,r.jsxs)(i.sF,{className:"flex flex-1 flex-col",children:[(0,r.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4 bg-white",children:[(0,r.jsx)(i.x2,{className:"-ml-1"}),(0,r.jsx)(d.w,{orientation:"vertical",className:"mr-2 h-4"}),(0,r.jsx)(c.Qp,{children:(0,r.jsxs)(c.AB,{children:[(0,r.jsx)(c.J5,{className:"hidden md:block",children:(0,r.jsx)(c.tJ,{children:"Documents"})}),(0,r.jsx)(c.tH,{className:"hidden md:block"}),(0,r.jsx)(c.J5,{children:(0,r.jsx)(c.tJ,{children:"Sent Documents"})})]})})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-6xl font-bold p-3",children:"Sent Documents"}),(0,r.jsx)(u.p,{type:"text",placeholder:"Search...",value:e,onChange:e=>s(e.target.value),className:"w-full md:w-64 border p-2 rounded"})]}),(0,r.jsx)("div",{className:"rounded-md border overflow-x-auto",children:(0,r.jsxs)(o.XI,{className:"w-full",children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"Date and Time"}),(0,r.jsx)(o.nd,{children:"AWD Reference Number"}),(0,r.jsx)(o.nd,{children:"Subject"}),(0,r.jsx)(o.nd,{children:"Forwarded By"}),(0,r.jsx)(o.nd,{children:"Forwarded To"}),(0,r.jsx)(o.nd,{children:"Remarks"})]})}),(0,r.jsx)(o.BF,{children:v.length?v.map(e=>(0,r.jsxs)(o.Hj,{className:"cursor-pointer hover:bg-gray-200",onClick:()=>y(e.awdrefnu),children:[(0,r.jsx)(o.nA,{children:e.datetime}),(0,r.jsx)(o.nA,{children:e.awdrefnu}),(0,r.jsx)(o.nA,{children:e.subject}),(0,r.jsx)(o.nA,{children:e.forwardby}),(0,r.jsx)(o.nA,{children:e.forwardto}),(0,r.jsx)(o.nA,{children:e.remarks})]},e.id)):(0,r.jsx)(o.Hj,{children:(0,r.jsx)(o.nA,{colSpan:6,className:"h-24 text-center",children:0===t.length?"No sent documents found":"No matching documents"})})})]})}),m.length>10&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",(w-1)*10+1," to"," ",Math.min(10*w,m.length)," of"," ",m.length," entries"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(h.$,{variant:"outline",onClick:()=>A(1),disabled:1===w,children:"First"}),(0,r.jsx)(h.$,{variant:"outline",onClick:()=>A(w-1),disabled:1===w,children:"Previous"}),(0,r.jsxs)("span",{className:"flex items-center px-4",children:["Page ",w," of ",p]}),(0,r.jsx)(h.$,{variant:"outline",onClick:()=>A(w+1),disabled:w===p,children:"Next"}),(0,r.jsx)(h.$,{variant:"outline",onClick:()=>A(p),disabled:w===p,children:"Last"})]})]})]})]})]})})})}},88524:(e,s,t)=>{"use strict";t.d(s,{A0:()=>n,BF:()=>i,Hj:()=>d,XI:()=>a,nA:()=>o,nd:()=>c});var r=t(95155);t(12115);var l=t(53999);function a(e){let{className:s,...t}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,l.cn)("w-full caption-bottom text-sm",s),...t})})}function n(e){let{className:s,...t}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,l.cn)("[&_tr]:border-b",s),...t})}function i(e){let{className:s,...t}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,l.cn)("[&_tr:last-child]:border-0",s),...t})}function d(e){let{className:s,...t}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,l.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function c(e){let{className:s,...t}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,l.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function o(e){let{className:s,...t}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,l.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}}},e=>{var s=s=>e(e.s=s);e.O(0,[507,888,655,2,528,441,684,358],()=>s(16118)),_N_E=e.O()}]);